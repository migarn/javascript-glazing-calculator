<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<title>Kalkulator szyb</title>
<script type="text/javascript">

// JavaScript

function onlyNumbers(event) {
	if (window.event) {
		code = window.event.keyCode;
	} else {
		code = event.which;
	}
	
	if (window.event) {
		if (code < 48 || code > 57) {
			window.event.returnValue = false;
		} else {
			window.event.returnValue = true;
		}
	} else {
		if (code < 48 || code > 57) {
			event.returnValue = false;
			event.preventDefault();
		} else {
			event.returnValue = true;
		}
	}
}

function calculate (glassWidth, glassHeight, spacerThickness) {
	var longerDimension;
	var shorterDimension;

	if (Number(glassWidth.value) > Number(glassHeight.value)) {
		longerDimension = glassWidth.value;
		shorterDimension = glassHeight.value;
	} else {
		longerDimension = glassHeight.value;
		shorterDimension = glassWidth.value;
	}
	
	var area = Math.round(100 * longerDimension * shorterDimension / (1000 * 1000)) / 100;
	var surcharge = determineSurcharge(longerDimension, shorterDimension);
	var ratio = shorterDimension / longerDimension;
	
	// sparsowaæ spacerThickness do Number przy przekazywaniu do defineThickness
	
	
	var mainOutputMessage = "Za³o¿one parametry szyby:" +
				"\n\t- wymiary: " + glassWidth.value + " mm x " + glassHeight.value + " mm," +
				"\n\t- powierzchnia szyby: " + area + " m2," +
				"\n\t- szeroko¶æ ramki dystansowej: " + spacerThickness.value + " mm.";
	
	document.getElementById("mainOutput").textContent = mainOutputMessage;
	
	if (surcharge > 0) {
		document.getElementById("surchargeOutput").textContent = "\nDla zadanych parametrów dop³ata za nadgabaryt wynosi " + surcharge + "%!";
		document.getElementById("noSurchargeOutput").textContent = "";
	} else if (surcharge == 0) {
		document.getElementById("surchargeOutput").textContent = "";
		document.getElementById("noSurchargeOutput").textContent = "\nDla zadanych parametrów nie ma dop³aty za nadgabaryt.";
	} 
	else {
		document.getElementById("surchargeOutput").textContent = "\nDla zadanych parametrów wielko¶æ dop³aty za nadgabaryt nale¿y konsultowaæ z dostawc± szk³a!";
		document.getElementById("noSurchargeOutput").textContent = "";
	}
			
	document.getElementById("assumptionsOutput").textContent = "\nPowy¿sze obliczenia maj± zastosowanie przy nastêpuj±cych za³o¿eniach:" +
																"\n\t- szklenie jest pionowe," +
																"\n\t- wysoko¶æ szklenia to 0-8 m ponad powierzchniê gruntu," +
																"\n\t- szyba jest klinowana na czterech bokach," +
																"\n\t- nie dotyczy szklenia naro¿ników budynków," +
																"\n\t- przyjêto ¶rednie obci±¿enie wiatrem w Polsce.";
}

function determineSurcharge(longerDimension, shorterDimension) {
	if (longerDimension <= 3000 && shorterDimension <= 2400) {
		return 0;
	} else if ((longerDimension > 2400 && longerDimension <= 3000 && shorterDimension > 2400 && shorterDimension <= 2700) ||
	(longerDimension > 3000 && longerDimension <= 4000 && shorterDimension < 2000)) {
		return 50;
	} else if ((longerDimension > 3000 && longerDimension <= 4000 && shorterDimension > 2000 && shorterDimension <= 2400) ||
	(longerDimension > 4000 && longerDimension <= 5000 && shorterDimension < 2000)) {
		return 75;
	} else if ((longerDimension > 3000 && longerDimension <= 4000 && shorterDimension > 2400 && shorterDimension <= 2700) ||
	(longerDimension > 4000 && longerDimension <= 5000 && shorterDimension > 2000 && shorterDimension <= 2400) ||
	(longerDimension > 5000 && longerDimension <= 6000 && shorterDimension < 2000)) {
		return 100;
	} else if ((longerDimension > 4000 && longerDimension <= 5000 && shorterDimension > 2400 && shorterDimension <= 2700) ||
    (longerDimension > 5000 && longerDimension <= 6000 && shorterDimension > 2000 && shorterDimension <= 2400)) {
		return 125;
	} else if (longerDimension > 5000 && longerDimension <= 6000 && shorterDimension > 2400 && shorterDimension <= 2700) {
		return 150;
	} else {
		return -1;
	}      
}

function defineThickness(longerDimension, shorterDimension, spacerThickness, area, ratio) {
	if (spacerThickness >= 16) {
		return defineThicknessFor16(longerDimension, shorterDimension, area, ratio);
	} else if (spacerThickness >= 12) {
		return defineThicknessFor12(longerDimension, shorterDimension, area, ratio);
	} else if (spacerThickness >= 9) {
		return defineThicknessFor9(longerDimension, shorterDimension, area, ratio);
	} else if (spacerThickness >= 6) {
		return defineThicknessFor6(longerDimension, shorterDimension, area, ratio);
	} else {
		return -1;
	}
}

function defineThicknessFor16(longerDimension, shorterDimension, area, ratio) {
	if (area <= 1.5 && longerDimension <= 1500 && ratio >=  1/6) {
		return 3;
	} else if (area <= 3.35 && longerDimension <= 2500 && ratio >= (double) 1/6) {
		return 4;
	} else if (area <= 5 && longerDimension <= 3300) {
		return 5;
	} else if (area <= 7 && longerDimension <= 3500) {
		return 6;
	} else if (area <= 10 && longerDimension <= 5000) {
		return 8;
	} else if (area <= 13.5 && longerDimension <= 5000) {
		return 10;
	} else if (area <= 13.5 && longerDimension <= 6000) {
		return 12;
	} else {
		return -1;
	}
}

// JavaScript

</script>
<style>
div {white-space: pre-wrap;}
label {margin-left:2em;}
input {margin-left:2em;}
</style>
</head>
<body>
<br>Kalkulator s³u¿y do obliczania minimalnych grubo¶ci szyb.<br>
Obliczenia oparte s± na normie zak³±dowej firmy PRESS GLASS SA.<br><br>
<form name="glazingCalculator">
	<label for="glassWidth">Szeroko¶æ szyby [mm]:</label><br>
	<input type="text" name="glassWidth" value=0 maxlength=4 onKeyPress="onlyNumbers(event)"><br><br>
	<label for="glassHeight">Wysoko¶æ szyby [mm]:</label><br>
	<input type="text" name="glassHeight" value=0 maxlength=4 onKeyPress="onlyNumbers(event)"><br><br>
	<label for="spacerThickness">Szeroko¶æ ramki dystansowej [mm]:</label><br>
	<input type="text" name="spacerThickness" value=16 maxlength=2 onKeyPress="onlyNumbers(event)"><br><br>
	<input type="button" name="oblicz" value="Oblicz" onClick="calculate(glassWidth, glassHeight, spacerThickness)">
</form><br>
<div id="mainOutput"/></div>
<div id="surchargeOutput" style="color:red;"/></div>
<div id="noSurchargeOutput"/></div>
<div id="assumptionsOutput"/></div>
</body>
</html>
